<div class="card">
  <h2>Registrar nueva solicitud</h2>
  <p><em>Los archivos cargados serán analizados por asistentes de IA especializados.</em></p>
  <form id="registroForm" (ngSubmit)="onSubmit()">
    <input type="text" [(ngModel)]="codigo" name="codigo" placeholder="Código de Proyecto" required>
    <input type="text" [(ngModel)]="nit" name="nit" placeholder="NIT del Proveedor" required>
    <input type="text" [(ngModel)]="proveedor" name="proveedor" placeholder="Nombre del Proveedor" required>
    <input type="file" (change)="onFileChange($event)" accept=".xlsx" required>

    <div id="dropzone" class="dropzone" (click)="fileInput.click()" (dragover)="onDragOver($event)" (dragleave)="onDragLeave()" (drop)="onDrop($event)">
      <p>Arrastra y suelta tus anexos aquí o haz clic para seleccionarlos</p>
      <input type="file" #fileInput (change)="onFilesSelected($event)" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx" hidden>
    </div>
    <ul id="fileList">
      <li *ngFor="let file of selectedFiles">✔ {{ file.name }}</li>
    </ul>

    <button type="submit" class="btn">Enviar</button>
  </form>
</div>
<!-- Modal simple -->
<div *ngIf="modalVisible" class="modal">
  <div class="modal-content">
    <span (click)="modalVisible = false" class="close">&times;</span>
    <div class="asistentes-paneles">
      <div class="asistente-panel">
        <img src="assets/asistente1.png" alt="Asistente 1" class="asistente-img">
        <div class="dimension-label ambiental">Dimensión Ambiental</div>
      </div>
      <div class="asistente-panel">
        <img src="assets/asistente2.png" alt="Asistente 2" class="asistente-img">
        <div class="dimension-label social">Dimensión Social</div>
      </div>
      <div class="asistente-panel">
        <img src="assets/asistente3.png" alt="Asistente 3" class="asistente-img">
        <div class="dimension-label economica">Dimensión Económica</div>
      </div>
    </div>
    <p class="procesando-msg">
      <strong>¡Tus asistentes ya iniciaron el procesamiento de la revisión!</strong>
    </p>
    <div class="loading-spinner">
      <div class="spinner-dot"></div>
      <div class="spinner-dot"></div>
      <div class="spinner-dot"></div>
      <div class="spinner-dot"></div>
    </div>
    <p>{{ modalMessage }}</p>
  </div>
</div>